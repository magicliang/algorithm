# æ•°ç»„åˆ†æ²»ç®—æ³•è®¾è®¡è¯€çªä¸åˆ†å‰²ç‚¹æ¨å¯¼

åˆ†æ²»ç®—æ³•æ˜¯è§£å†³å¤æ‚é—®é¢˜çš„é‡è¦ç­–ç•¥ï¼Œå…¶æ ¸å¿ƒåœ¨äº"åˆ†è€Œæ²»ä¹‹"â€”â€”å°†å¤§é—®é¢˜åˆ†è§£ä¸ºå°é—®é¢˜ï¼Œé€’å½’æ±‚è§£ååˆå¹¶ç»“æœã€‚ç„¶è€Œï¼Œ**å¦‚ä½•é€‰æ‹©åˆé€‚çš„åˆ†å‰²ç‚¹**æ˜¯åˆ†æ²»ç®—æ³•è®¾è®¡çš„å…³é”®ï¼Œä¸åŒçš„åˆ†å‰²ç­–ç•¥ä¼šå¯¼è‡´æˆªç„¶ä¸åŒçš„ç®—æ³•å¤æ‚åº¦å’Œå®ç°éš¾åº¦ã€‚

## ä¸€ã€åˆ†æ²»ç®—æ³•çš„ä¸¤ç§åŸºæœ¬æ¨¡å¼

### 1.1 æœºæ¢°å¼å‡åŒ€åˆ†å‰²ï¼ˆç»å…¸æ¨¡å¼ï¼‰

**ç‰¹ç‚¹**ï¼š
- æŒ‰ç…§å›ºå®šè§„åˆ™ï¼ˆå¦‚ä¸­ç‚¹ï¼‰è¿›è¡Œåˆ†å‰²
- åˆ†å‰²ç‚¹ä¸é—®é¢˜å†…å®¹æ— å…³
- éœ€è¦å¤„ç†è·¨è¶Šåˆ†å‰²ç‚¹çš„æƒ…å†µ

**å…¸å‹åº”ç”¨**ï¼š
- å½’å¹¶æ’åº
- å¿«é€Ÿæ’åº
- æœ€å¤§å­æ•°ç»„å’Œï¼ˆè‚¡ç¥¨é—®é¢˜ï¼‰
- çŸ©é˜µä¹˜æ³•

**æ¨¡æ¿ç»“æ„**ï¼š
```java
public ResultType divideAndConquer(int[] arr, int left, int right) {
    // åŸºç¡€æƒ…å†µ
    if (left >= right) {
        return baseCase(arr, left, right);
    }
    
    // æœºæ¢°å¼åˆ†å‰²
    int mid = left + (right - left) / 2;
    
    // é€’å½’æ±‚è§£å­é—®é¢˜
    ResultType leftResult = divideAndConquer(arr, left, mid);
    ResultType rightResult = divideAndConquer(arr, mid + 1, right);
    
    // å…³é”®ï¼šå¤„ç†è·¨è¶Šåˆ†å‰²ç‚¹çš„æƒ…å†µ
    ResultType crossResult = handleCrossCase(arr, left, mid, right);
    
    // åˆå¹¶ç»“æœ
    return merge(leftResult, rightResult, crossResult);
}
```

### 1.2 æ™ºèƒ½å†…å®¹åˆ†å‰²ï¼ˆé—®é¢˜é©±åŠ¨æ¨¡å¼ï¼‰

**ç‰¹ç‚¹**ï¼š
- æ ¹æ®é—®é¢˜ç‰¹æ€§é€‰æ‹©åˆ†å‰²ç‚¹
- åˆ†å‰²ç‚¹é€šå¸¸æ˜¯"é—®é¢˜å…ƒç´ "æˆ–"éšœç¢å…ƒç´ "
- æ— éœ€å¤„ç†è·¨è¶Šæƒ…å†µï¼ˆå¤©ç„¶ä¸å¯èƒ½è·¨è¶Šï¼‰

**å…¸å‹åº”ç”¨**ï¼š
- å­—ç¬¦é¢‘æ¬¡é—®é¢˜
- åŒºé—´è°ƒåº¦é—®é¢˜
- æŸäº›å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜

**æ¨¡æ¿ç»“æ„**ï¼š
```java
public ResultType smartDivideAndConquer(String s, int start, int end, int constraint) {
    // åŸºç¡€æƒ…å†µ
    if (start > end) {
        return baseCase();
    }
    
    // æ™ºèƒ½å¯»æ‰¾åˆ†å‰²ç‚¹
    List<Integer> splitPoints = findProblemElements(s, start, end, constraint);
    
    if (splitPoints.isEmpty()) {
        // æ²¡æœ‰é—®é¢˜å…ƒç´ ï¼Œæ•´ä¸ªåŒºé—´å¯èƒ½æ˜¯ç­”æ¡ˆ
        return evaluateWholeRange(s, start, end, constraint);
    }
    
    // æŒ‰é—®é¢˜å…ƒç´ åˆ†å‰²ï¼Œé€’å½’å¤„ç†å„æ®µ
    ResultType maxResult = getInitialValue();
    int currentStart = start;
    
    for (int splitPoint : splitPoints) {
        if (currentStart < splitPoint) {
            ResultType segmentResult = smartDivideAndConquer(s, currentStart, splitPoint - 1, constraint);
            maxResult = combineResults(maxResult, segmentResult);
        }
        currentStart = splitPoint + 1;
    }
    
    // å¤„ç†æœ€åä¸€æ®µ
    if (currentStart <= end) {
        ResultType lastSegmentResult = smartDivideAndConquer(s, currentStart, end, constraint);
        maxResult = combineResults(maxResult, lastSegmentResult);
    }
    
    return maxResult;
}
```

## äºŒã€åˆ†å‰²ç‚¹æ¨å¯¼çš„æ€ç»´æ¡†æ¶

### 2.1 æ ¸å¿ƒæ€ç»´è¿‡ç¨‹

**ç¬¬ä¸€æ­¥ï¼šé—®é¢˜æœ¬è´¨åˆ†æ**
```
é—®é¢˜ï¼šå¯»æ‰¾æ»¡è¶³æ¡ä»¶Cçš„æœ€ä¼˜å­ç»“æ„
å…³é”®é—®é¢˜ï¼šä»€ä¹ˆå…ƒç´ ä¼š"ç ´å"æ¡ä»¶Cï¼Ÿ
```

**ç¬¬äºŒæ­¥ï¼šç ´åæ€§å…ƒç´ è¯†åˆ«**
```
å¦‚æœå…ƒç´ Eç ´åæ¡ä»¶Cï¼Œé‚£ä¹ˆï¼š
1. ä»»ä½•åŒ…å«Eçš„è§£éƒ½ä¸å¯èƒ½æ˜¯æœ‰æ•ˆè§£
2. Eå¤©ç„¶æˆä¸ºåˆ†å‰²è¾¹ç•Œ
3. æœ€ä¼˜è§£å¿…å®šåœ¨æŸä¸ªä¸åŒ…å«Eçš„è¿ç»­æ®µå†…
```

**ç¬¬ä¸‰æ­¥ï¼šåˆ†æ²»å¯è¡Œæ€§éªŒè¯**
```
éªŒè¯ç‚¹ï¼š
âœ… å­é—®é¢˜ä¸åŸé—®é¢˜åŒæ„
âœ… å­é—®é¢˜ä¹‹é—´ç›¸äº’ç‹¬ç«‹  
âœ… æ— éœ€è€ƒè™‘è·¨è¶Šæƒ…å†µ
âœ… åˆå¹¶æ“ä½œç®€å•ï¼ˆé€šå¸¸æ˜¯å–æœ€å¤§å€¼ï¼‰
```

### 2.2 æ¨å¯¼å†³ç­–æ ‘

```
å¼€å§‹åˆ†æé—®é¢˜
    â†“
é—®é¢˜æ˜¯å¦æœ‰"å¤©ç„¶éšœç¢å…ƒç´ "ï¼Ÿ
    â†“                    â†“
   æ˜¯                    å¦
    â†“                    â†“
ä½¿ç”¨æ™ºèƒ½å†…å®¹åˆ†å‰²        è€ƒè™‘æœºæ¢°å¼åˆ†å‰²
    â†“                    â†“
è¯†åˆ«éšœç¢å…ƒç´ ç‰¹å¾        åˆ†æè·¨è¶Šæƒ…å†µå¤æ‚åº¦
    â†“                    â†“
è®¾è®¡é€’å½’ç»“æ„           é€‰æ‹©åˆé€‚çš„åˆ†å‰²ç­–ç•¥
```

## ä¸‰ã€ç»å…¸æ¡ˆä¾‹æ·±åº¦è§£æ

### 3.1 æ¡ˆä¾‹ä¸€ï¼šå­—ç¬¦é¢‘æ¬¡é—®é¢˜

**é—®é¢˜**ï¼šæ‰¾å‡ºå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦éƒ½è‡³å°‘å‡ºç°Kæ¬¡çš„æœ€é•¿å­ä¸²

**åˆ†å‰²ç‚¹æ¨å¯¼è¿‡ç¨‹**ï¼š

**æ­¥éª¤1ï¼šé—®é¢˜æœ¬è´¨åˆ†æ**
```
ç›®æ ‡ï¼šå­ä¸²ä¸­æ¯ä¸ªå­—ç¬¦é¢‘æ¬¡ â‰¥ K
ç ´åæ¡ä»¶ï¼šæŸä¸ªå­—ç¬¦é¢‘æ¬¡ < K ä¸” > 0
```

**æ­¥éª¤2ï¼šç ´åæ€§åˆ†æ**
```
å¦‚æœå­—ç¬¦chçš„é¢‘æ¬¡ä¸ºfï¼Œä¸”0 < f < Kï¼š
- ä»»ä½•åŒ…å«chçš„å­ä¸²éƒ½ä¸å¯èƒ½æ»¡è¶³æ¡ä»¶
- chæˆä¸º"æ¯’è¯"ï¼Œæ±¡æŸ“æ‰€æœ‰åŒ…å«å®ƒçš„å­ä¸²
- chå¤©ç„¶æˆä¸ºåˆ†å‰²ç‚¹
```

**æ­¥éª¤3ï¼šåˆ†æ²»ç­–ç•¥ç¡®å®š**
```java
public int longestSubstring(String s, int k) {
    return divideAndConquer(s, 0, s.length() - 1, k);
}

private int divideAndConquer(String s, int start, int end, int k) {
    if (start > end) return 0;
    
    // ç»Ÿè®¡å­—ç¬¦é¢‘æ¬¡
    int[] freq = new int[26];
    for (int i = start; i <= end; i++) {
        freq[s.charAt(i) - 'a']++;
    }
    
    // å¯»æ‰¾é—®é¢˜å­—ç¬¦ï¼ˆé¢‘æ¬¡>0ä¸”<kï¼‰
    for (int i = start; i <= end; i++) {
        char ch = s.charAt(i);
        if (freq[ch - 'a'] > 0 && freq[ch - 'a'] < k) {
            // æ‰¾åˆ°é—®é¢˜å­—ç¬¦ï¼Œä»¥å®ƒä¸ºåˆ†å‰²ç‚¹
            int maxLen = 0;
            int segmentStart = start;
            
            // åˆ†å‰²å¹¶é€’å½’å¤„ç†å„æ®µ
            for (int j = start; j <= end + 1; j++) {
                if (j == end + 1 || s.charAt(j) == ch) {
                    if (segmentStart < j) {
                        maxLen = Math.max(maxLen, 
                            divideAndConquer(s, segmentStart, j - 1, k));
                    }
                    segmentStart = j + 1;
                }
            }
            return maxLen;
        }
    }
    
    // æ²¡æœ‰é—®é¢˜å­—ç¬¦ï¼Œæ•´ä¸ªåŒºé—´éƒ½æ»¡è¶³æ¡ä»¶
    return end - start + 1;
}
```

**å…³é”®æ´å¯Ÿ**ï¼š
- **é—®é¢˜å­—ç¬¦**å°±æ˜¯å¤©ç„¶çš„åˆ†å‰²ç‚¹
- æ— éœ€è€ƒè™‘è·¨è¶Šæƒ…å†µï¼Œå› ä¸ºè·¨è¶Šå¿…ç„¶åŒ…å«é—®é¢˜å­—ç¬¦
- æ—¶é—´å¤æ‚åº¦ï¼šO(N Ã— å­—ç¬¦é›†å¤§å°)

### 3.2 æ¡ˆä¾‹äºŒï¼šåŒºé—´è°ƒåº¦é—®é¢˜

**é—®é¢˜**ï¼šç»™å®šä¸€ç³»åˆ—åŒºé—´ï¼Œæ‰¾å‡ºæœ€å¤§çš„ä¸é‡å åŒºé—´æ•°é‡

**åˆ†å‰²ç‚¹æ¨å¯¼è¿‡ç¨‹**ï¼š

**æ­¥éª¤1ï¼šé—®é¢˜åˆ†æ**
```
ç›®æ ‡ï¼šé€‰æ‹©æœ€å¤šçš„ä¸é‡å åŒºé—´
å†²çªå…ƒç´ ï¼šé‡å çš„åŒºé—´ç»„
```

**æ­¥éª¤2ï¼šåˆ†å‰²ç­–ç•¥**
```
æŒ‰åŒºé—´ç»“æŸæ—¶é—´æ’åºåï¼š
- é€‰æ‹©ä¸€ä¸ªåŒºé—´ä½œä¸º"åˆ†å‰²ç‚¹"
- å°†é—®é¢˜åˆ†ä¸ºï¼šåŒ…å«è¯¥åŒºé—´ vs ä¸åŒ…å«è¯¥åŒºé—´
- é€’å½’æ±‚è§£ä¸¤ä¸ªå­é—®é¢˜
```

**æ­¥éª¤3ï¼šå®ç°**
```java
public int maxNonOverlapping(int[][] intervals) {
    Arrays.sort(intervals, (a, b) -> a[1] - b[1]); // æŒ‰ç»“æŸæ—¶é—´æ’åº
    return divideAndConquer(intervals, 0);
}

private int divideAndConquer(int[][] intervals, int start) {
    if (start >= intervals.length) return 0;
    
    // é€‰æ‹©å½“å‰åŒºé—´
    int include = 1 + divideAndConquer(intervals, findNextNonOverlapping(intervals, start));
    
    // ä¸é€‰æ‹©å½“å‰åŒºé—´
    int exclude = divideAndConquer(intervals, start + 1);
    
    return Math.max(include, exclude);
}
```

### 3.3 æ¡ˆä¾‹ä¸‰ï¼šè‚¡ç¥¨é—®é¢˜ï¼ˆæœºæ¢°å¼åˆ†å‰²çš„å¿…è¦æ€§ï¼‰

**é—®é¢˜**ï¼šä¹°å–è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ï¼ˆæœ€å¤§å­æ•°ç»„å’Œï¼‰

**ä¸ºä»€ä¹ˆå¿…é¡»ç”¨æœºæ¢°å¼åˆ†å‰²ï¼Ÿ**

**åˆ†æè¿‡ç¨‹**ï¼š
```
ç›®æ ‡ï¼šæ‰¾åˆ°æœ€å¤§çš„è¿ç»­å­æ•°ç»„å’Œ
é—®é¢˜ï¼šæ²¡æœ‰æ˜æ˜¾çš„"ç ´åæ€§å…ƒç´ "

å°è¯•æ™ºèƒ½åˆ†å‰²ï¼š
- è´Ÿæ•°æ˜¯"åå…ƒç´ "å—ï¼Ÿä¸ä¸€å®šï¼Œå¯èƒ½æ˜¯å±€éƒ¨æœ€å°å€¼
- æ­£æ•°æ˜¯"å¥½å…ƒç´ "å—ï¼Ÿä¸ä¸€å®šï¼Œå¯èƒ½åé¢æœ‰æ›´å¤§çš„è´Ÿæ•°
- æ— æ³•æ‰¾åˆ°å¤©ç„¶çš„åˆ†å‰²ç‚¹
```

**æœºæ¢°å¼åˆ†å‰²çš„å¿…è¦æ€§**ï¼š
```java
public int maxSubArray(int[] nums, int left, int right) {
    if (left == right) return nums[left];
    
    int mid = left + (right - left) / 2;
    
    // å¿…é¡»è€ƒè™‘è·¨è¶Šä¸­ç‚¹çš„æƒ…å†µ
    int leftMax = maxSubArray(nums, left, mid);
    int rightMax = maxSubArray(nums, mid + 1, right);
    int crossMax = maxCrossingSum(nums, left, mid, right);
    
    return Math.max(Math.max(leftMax, rightMax), crossMax);
}

// å…³é”®ï¼šå¤„ç†è·¨è¶Šæƒ…å†µ
private int maxCrossingSum(int[] nums, int left, int mid, int right) {
    int leftSum = Integer.MIN_VALUE, sum = 0;
    for (int i = mid; i >= left; i--) {
        sum += nums[i];
        leftSum = Math.max(leftSum, sum);
    }
    
    int rightSum = Integer.MIN_VALUE;
    sum = 0;
    for (int i = mid + 1; i <= right; i++) {
        sum += nums[i];
        rightSum = Math.max(rightSum, sum);
    }
    
    return leftSum + rightSum;
}
```

## å››ã€åˆ†å‰²ç‚¹é€‰æ‹©çš„åˆ¤æ–­æ ‡å‡†

### 4.1 æ™ºèƒ½åˆ†å‰²çš„é€‚ç”¨æ¡ä»¶

**å¿…è¦æ¡ä»¶**ï¼š
1. **å­˜åœ¨æ˜ç¡®çš„ç ´åæ€§å…ƒç´ **ï¼šèƒ½å¤Ÿè¯†åˆ«å‡º"æ¯’è¯"å…ƒç´ 
2. **ç ´åæ€§æ˜¯ç»å¯¹çš„**ï¼šåŒ…å«è¯¥å…ƒç´ çš„ä»»ä½•è§£éƒ½æ— æ•ˆ
3. **åˆ†å‰²åå­é—®é¢˜ç‹¬ç«‹**ï¼šå„æ®µä¹‹é—´æ— ç›¸äº’å½±å“
4. **åˆå¹¶æ“ä½œç®€å•**ï¼šé€šå¸¸åªéœ€å–æœ€å¤§å€¼æˆ–æ±‚å’Œ

**åˆ¤æ–­é—®é¢˜**ï¼š
```
Q1: æ˜¯å¦å­˜åœ¨æŸäº›å…ƒç´ ï¼Œä½¿å¾—åŒ…å«å®ƒä»¬çš„ä»»ä½•è§£éƒ½æ— æ•ˆï¼Ÿ
Q2: è¿™äº›å…ƒç´ æ˜¯å¦å¯ä»¥ä½œä¸ºå¤©ç„¶çš„åˆ†å‰²è¾¹ç•Œï¼Ÿ
Q3: åˆ†å‰²åçš„å­é—®é¢˜æ˜¯å¦ä¸åŸé—®é¢˜åŒæ„ï¼Ÿ
Q4: æ˜¯å¦éœ€è¦è€ƒè™‘è·¨è¶Šåˆ†å‰²ç‚¹çš„æƒ…å†µï¼Ÿ

å¦‚æœQ1-Q3ç­”æ¡ˆä¸º"æ˜¯"ï¼ŒQ4ç­”æ¡ˆä¸º"å¦"ï¼Œåˆ™é€‚åˆæ™ºèƒ½åˆ†å‰²ã€‚
```

### 4.2 æœºæ¢°å¼åˆ†å‰²çš„é€‚ç”¨æ¡ä»¶

**é€‚ç”¨åœºæ™¯**ï¼š
1. **æ— æ˜æ˜¾ç ´åæ€§å…ƒç´ **ï¼šé—®é¢˜ä¸­æ²¡æœ‰å¤©ç„¶çš„åˆ†å‰²ç‚¹
2. **æœ€ä¼˜è§£å¯èƒ½è·¨è¶Šä»»æ„åˆ†å‰²ç‚¹**ï¼šéœ€è¦è€ƒè™‘è·¨è¶Šæƒ…å†µ
3. **é—®é¢˜å…·æœ‰æœ€ä¼˜å­ç»“æ„**ï¼šå¯ä»¥é€šè¿‡åˆå¹¶å­é—®é¢˜å¾—åˆ°æœ€ä¼˜è§£
4. **è·¨è¶Šæƒ…å†µå¯ä»¥é«˜æ•ˆå¤„ç†**ï¼šæœ‰ç®—æ³•å¤„ç†è·¨è¶Šåˆ†å‰²ç‚¹çš„æƒ…å†µ

### 4.3 é€‰æ‹©å†³ç­–æµç¨‹å›¾

```mermaid
graph TD
    A[å¼€å§‹åˆ†æé—®é¢˜] --> B{æ˜¯å¦å­˜åœ¨ç ´åæ€§å…ƒç´ ï¼Ÿ}
    B -->|æ˜¯| C{ç ´åæ€§æ˜¯å¦ç»å¯¹ï¼Ÿ}
    B -->|å¦| D[è€ƒè™‘æœºæ¢°å¼åˆ†å‰²]
    C -->|æ˜¯| E{åˆ†å‰²åå­é—®é¢˜ç‹¬ç«‹ï¼Ÿ}
    C -->|å¦| D
    E -->|æ˜¯| F[ä½¿ç”¨æ™ºèƒ½å†…å®¹åˆ†å‰²]
    E -->|å¦| D
    D --> G{æœ€ä¼˜è§£æ˜¯å¦å¯èƒ½è·¨è¶Šï¼Ÿ}
    G -->|æ˜¯| H{è·¨è¶Šæƒ…å†µå¯é«˜æ•ˆå¤„ç†ï¼Ÿ}
    G -->|å¦| I[é—®é¢˜å¯èƒ½ä¸é€‚åˆåˆ†æ²»]
    H -->|æ˜¯| J[ä½¿ç”¨æœºæ¢°å¼åˆ†å‰²]
    H -->|å¦| I
    
    F --> K[å®ç°æ™ºèƒ½åˆ†å‰²ç®—æ³•]
    J --> L[å®ç°æœºæ¢°å¼åˆ†å‰²ç®—æ³•]
    I --> M[è€ƒè™‘å…¶ä»–ç®—æ³•ç­–ç•¥]
```

## äº”ã€å®æˆ˜æŠ€å·§ä¸å¸¸è§é™·é˜±

### 5.1 æ™ºèƒ½åˆ†å‰²çš„å®æˆ˜æŠ€å·§

**æŠ€å·§1ï¼šé—®é¢˜å…ƒç´ çš„å¿«é€Ÿè¯†åˆ«**
```java
// æ¨¡æ¿ï¼šè¯†åˆ«é—®é¢˜å…ƒç´ 
private List<Integer> findProblemElements(String s, int start, int end, int constraint) {
    // 1. ç»Ÿè®¡ç‰¹å¾ï¼ˆé¢‘æ¬¡ã€é•¿åº¦ã€æ•°é‡ç­‰ï¼‰
    Map<Character, Integer> stats = collectStats(s, start, end);
    
    // 2. è¯†åˆ«è¿åçº¦æŸçš„å…ƒç´ 
    List<Integer> problemPositions = new ArrayList<>();
    for (int i = start; i <= end; i++) {
        if (violatesConstraint(s.charAt(i), stats, constraint)) {
            problemPositions.add(i);
        }
    }
    
    return problemPositions;
}
```

**æŠ€å·§2ï¼šåˆ†å‰²è¾¹ç•Œçš„ç²¾ç¡®å¤„ç†**
```java
// ç¡®ä¿åˆ†å‰²è¾¹ç•Œä¸åŒ…å«é—®é¢˜å…ƒç´ 
private void processSegments(String s, List<Integer> splitPoints, int start, int end) {
    int currentStart = start;
    
    for (int splitPoint : splitPoints) {
        // å¤„ç†åˆ†å‰²ç‚¹ä¹‹å‰çš„æ®µ
        if (currentStart < splitPoint) {
            processSegment(s, currentStart, splitPoint - 1);
        }
        // è·³è¿‡é—®é¢˜å…ƒç´ 
        currentStart = splitPoint + 1;
    }
    
    // å¤„ç†æœ€åä¸€æ®µ
    if (currentStart <= end) {
        processSegment(s, currentStart, end);
    }
}
```

### 5.2 å¸¸è§é™·é˜±ä¸é¿å…æ–¹æ³•

**é™·é˜±1ï¼šè¯¯åˆ¤ç ´åæ€§å…ƒç´ **
```java
// é”™è¯¯ï¼šè®¤ä¸ºæ‰€æœ‰è´Ÿæ•°éƒ½æ˜¯é—®é¢˜å…ƒç´ 
// æ­£ç¡®ï¼šåªæœ‰åœ¨ç‰¹å®šä¸Šä¸‹æ–‡ä¸­æ‰æ˜¯é—®é¢˜å…ƒç´ 
private boolean isProblemElement(int value, Context context) {
    // éœ€è¦ç»“åˆå…·ä½“é—®é¢˜åˆ¤æ–­
    return context.violatesConstraint(value);
}
```

**é™·é˜±2ï¼šå¿½ç•¥è¾¹ç•Œæƒ…å†µ**
```java
// ç¡®ä¿å¤„ç†ç©ºæ®µå’Œå•å…ƒç´ æ®µ
private int processSegment(String s, int start, int end) {
    if (start > end) return 0;           // ç©ºæ®µ
    if (start == end) return 1;          // å•å…ƒç´ æ®µ
    return divideAndConquer(s, start, end); // æ­£å¸¸é€’å½’
}
```

**é™·é˜±3ï¼šåˆ†å‰²ç‚¹é€‰æ‹©ä¸å½“**
```java
// é”™è¯¯ï¼šé€‰æ‹©ç¬¬ä¸€ä¸ªé—®é¢˜å…ƒç´ å°±åˆ†å‰²
// æ­£ç¡®ï¼šæ‰¾å‡ºæ‰€æœ‰é—®é¢˜å…ƒç´ ï¼Œä¸€æ¬¡æ€§åˆ†å‰²
private List<Integer> findAllProblemElements(String s, int start, int end) {
    List<Integer> problems = new ArrayList<>();
    // æ‰«ææ•´ä¸ªåŒºé—´ï¼Œæ‰¾å‡ºæ‰€æœ‰é—®é¢˜å…ƒç´ 
    for (int i = start; i <= end; i++) {
        if (isProblemElement(s.charAt(i))) {
            problems.add(i);
        }
    }
    return problems;
}
```

## å…­ã€å¤æ‚åº¦åˆ†æä¸ä¼˜åŒ–ç­–ç•¥

### 6.1 æ™ºèƒ½åˆ†å‰²çš„å¤æ‚åº¦åˆ†æ

**æ—¶é—´å¤æ‚åº¦**ï¼š
- **æœ€å¥½æƒ…å†µ**ï¼šO(N)ï¼Œé—®é¢˜å…ƒç´ å‡åŒ€åˆ†å¸ƒ
- **æœ€åæƒ…å†µ**ï¼šO(NÂ²)ï¼Œé—®é¢˜å…ƒç´ é›†ä¸­åœ¨ä¸€ç«¯
- **å¹³å‡æƒ…å†µ**ï¼šO(N log N)

**ç©ºé—´å¤æ‚åº¦**ï¼š
- **é€’å½’æ ˆæ·±åº¦**ï¼šO(log N) åˆ° O(N)
- **è¾…åŠ©ç©ºé—´**ï¼šO(å­—ç¬¦é›†å¤§å°) æˆ– O(N)

**ä¼˜åŒ–ç­–ç•¥**ï¼š
```java
// ä¼˜åŒ–1ï¼šå°¾é€’å½’ä¼˜åŒ–
private int optimizedDivideConquer(String s, int start, int end, int k) {
    while (start <= end) {
        List<Integer> problems = findProblemElements(s, start, end, k);
        if (problems.isEmpty()) {
            return end - start + 1;
        }
        
        // é€‰æ‹©æœ€å¤§çš„æ®µç»§ç»­å¤„ç†ï¼Œå…¶ä»–æ®µé€’å½’å¤„ç†
        int maxLen = 0;
        int maxSegmentStart = -1, maxSegmentEnd = -1;
        int currentStart = start;
        
        for (int problem : problems) {
            if (currentStart < problem) {
                int segmentLen = problem - currentStart;
                if (segmentLen > maxSegmentEnd - maxSegmentStart + 1) {
                    maxSegmentStart = currentStart;
                    maxSegmentEnd = problem - 1;
                }
                maxLen = Math.max(maxLen, 
                    optimizedDivideConquer(s, currentStart, problem - 1, k));
            }
            currentStart = problem + 1;
        }
        
        // å°¾é€’å½’å¤„ç†æœ€å¤§æ®µ
        start = maxSegmentStart;
        end = maxSegmentEnd;
    }
    return 0;
}
```

### 6.2 æœºæ¢°å¼åˆ†å‰²çš„å¤æ‚åº¦åˆ†æ

**æ ‡å‡†å¤æ‚åº¦**ï¼š
- **æ—¶é—´å¤æ‚åº¦**ï¼šO(N log N)ï¼Œæ¯å±‚O(N)ï¼Œå…±log Nå±‚
- **ç©ºé—´å¤æ‚åº¦**ï¼šO(log N)ï¼Œé€’å½’æ ˆæ·±åº¦

**ä¼˜åŒ–è€ƒè™‘**ï¼š
- é€‰æ‹©åˆé€‚çš„åˆ†å‰²ç‚¹ï¼ˆä¸ä¸€å®šæ˜¯ä¸­ç‚¹ï¼‰
- å‡å°‘è·¨è¶Šæƒ…å†µçš„å¤„ç†å¤æ‚åº¦
- è€ƒè™‘è¿­ä»£ç‰ˆæœ¬é¿å…é€’å½’å¼€é”€

## ä¸ƒã€æ€»ç»“ä¸å®è·µå»ºè®®

### 7.1 æ ¸å¿ƒåŸåˆ™æ€»ç»“

1. **æ™ºèƒ½åˆ†å‰²ä¼˜å…ˆ**ï¼šå¦‚æœå­˜åœ¨å¤©ç„¶çš„åˆ†å‰²ç‚¹ï¼Œä¼˜å…ˆä½¿ç”¨æ™ºèƒ½åˆ†å‰²
2. **ç ´åæ€§åˆ¤æ–­**ï¼šå…³é”®åœ¨äºè¯†åˆ«ä»€ä¹ˆå…ƒç´ ä¼š"ç»å¯¹åœ°"ç ´åè§£çš„æœ‰æ•ˆæ€§
3. **è·¨è¶Šåˆ†æ**ï¼šåˆ¤æ–­æœ€ä¼˜è§£æ˜¯å¦å¯èƒ½è·¨è¶Šåˆ†å‰²ç‚¹
4. **å¤æ‚åº¦æƒè¡¡**ï¼šåœ¨ç®—æ³•å¤æ‚åº¦å’Œå®ç°å¤æ‚åº¦ä¹‹é—´æ‰¾å¹³è¡¡

### 7.2 å®è·µå»ºè®®

**è®¾è®¡é˜¶æ®µ**ï¼š
1. å…ˆåˆ†æé—®é¢˜æ˜¯å¦æœ‰ç ´åæ€§å…ƒç´ 
2. éªŒè¯åˆ†å‰²åå­é—®é¢˜çš„ç‹¬ç«‹æ€§
3. è¯„ä¼°è·¨è¶Šæƒ…å†µçš„å¤„ç†å¤æ‚åº¦
4. é€‰æ‹©æœ€é€‚åˆçš„åˆ†å‰²ç­–ç•¥

**å®ç°é˜¶æ®µ**ï¼š
1. ä»”ç»†å¤„ç†è¾¹ç•Œæƒ…å†µ
2. ç¡®ä¿åˆ†å‰²ç‚¹é€‰æ‹©çš„æ­£ç¡®æ€§
3. ä¼˜åŒ–é€’å½’ç»“æ„é¿å…é‡å¤è®¡ç®—
4. æ·»åŠ å……åˆ†çš„æµ‹è¯•ç”¨ä¾‹

**è°ƒè¯•é˜¶æ®µ**ï¼š
1. éªŒè¯åˆ†å‰²é€»è¾‘çš„æ­£ç¡®æ€§
2. æ£€æŸ¥é€’å½’ç»ˆæ­¢æ¡ä»¶
3. ç¡®è®¤ç»“æœåˆå¹¶çš„æ­£ç¡®æ€§
4. åˆ†ææ—¶é—´å¤æ‚åº¦æ˜¯å¦ç¬¦åˆé¢„æœŸ

### 7.3 æ‰©å±•æ€è€ƒ

åˆ†æ²»ç®—æ³•çš„åˆ†å‰²ç‚¹é€‰æ‹©ä½“ç°äº†**é—®é¢˜åˆ†è§£çš„è‰ºæœ¯**ï¼š
- **æ™ºèƒ½åˆ†å‰²**ä½“ç°äº†å¯¹é—®é¢˜æœ¬è´¨çš„æ·±åˆ»ç†è§£
- **æœºæ¢°å¼åˆ†å‰²**ä½“ç°äº†é€šç”¨æ€§å’Œç¨³å®šæ€§çš„è¿½æ±‚
- **æ··åˆç­–ç•¥**åœ¨æŸäº›å¤æ‚é—®é¢˜ä¸­å¯èƒ½æ˜¯æœ€ä¼˜é€‰æ‹©

æŒæ¡è¿™äº›åˆ†å‰²ç­–ç•¥ï¼Œä¸ä»…èƒ½å¤Ÿè§£å†³å…·ä½“çš„ç®—æ³•é—®é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯åŸ¹å…»äº†**åˆ†è§£å¤æ‚é—®é¢˜çš„æ€ç»´èƒ½åŠ›**ï¼Œè¿™åœ¨è½¯ä»¶è®¾è®¡å’Œç³»ç»Ÿæ¶æ„ä¸­åŒæ ·å…·æœ‰é‡è¦ä»·å€¼ã€‚

---

## ğŸš¨ **é‡è¦é™åˆ¶ï¼šè¿ç»­æ€§æ˜¯æ™ºèƒ½åˆ†å‰²çš„å‰æ**

### è¿ç»­ vs éè¿ç»­é—®é¢˜çš„æœ¬è´¨å·®å¼‚

| é—®é¢˜ç±»å‹ | ç ´åæ€§å…ƒç´ åˆ†å‰² | åŸå› åˆ†æ | å…¸å‹ä¾‹å­ |
|---------|---------------|----------|----------|
| **è¿ç»­å­æ•°ç»„/å­ä¸²** | âœ… å¯è¡Œ | ç ´åæ€§å…ƒç´ å¼ºåˆ¶åˆ‡æ–­è¿ç»­æ€§ï¼Œæ— æ³•ç»•è¿‡ | å­—ç¬¦é¢‘æ¬¡é—®é¢˜ã€æœ€å¤§å­æ•°ç»„å’Œ |
| **éè¿ç»­å­åºåˆ—** | âŒ ä¸å¯è¡Œ | å¯ä»¥è·³è¿‡ç ´åæ€§å…ƒç´ ï¼Œä¸æ„æˆç»å¯¹è¾¹ç•Œ | æœ€é•¿é€’å¢å­åºåˆ—ã€å­é›†é—®é¢˜ |

### ä¸ºä»€ä¹ˆè¿ç»­æ€§å¦‚æ­¤å…³é”®ï¼Ÿ

**è¿ç»­å­æ•°ç»„çš„"å¼ºåˆ¶åˆ†å‰²"ç‰¹æ€§**ï¼š
```java
// å­—ç¬¦é¢‘æ¬¡é—®é¢˜ï¼šæ¯ä¸ªå­—ç¬¦è‡³å°‘å‡ºç°Kæ¬¡çš„æœ€é•¿å­ä¸²
String s = "aaabbbcccdddeee";
// å¦‚æœæŸå­—ç¬¦å‡ºç°æ¬¡æ•° < kï¼Œå®ƒå°±æ˜¯"æ¯’è¯"
// ä»»ä½•åŒ…å«å®ƒçš„è¿ç»­å­ä¸²éƒ½æ— æ•ˆ â†’ å¤©ç„¶åˆ†å‰²ç‚¹
```

**éè¿ç»­å­åºåˆ—çš„"å¯è·³è¿‡"ç‰¹æ€§**ï¼š
```java
// æœ€é•¿é€’å¢å­åºåˆ—
int[] nums = {1, 5, 2, 8, 3, 9};
// å³ä½¿5â†’2é€’å‡ï¼ˆç ´åé€’å¢æ€§ï¼‰ï¼Œä»å¯é€‰æ‹©[1,2,3,9]è·³è¿‡å®ƒ
// ç ´åæ€§å…ƒç´ ä¸æ„æˆç»å¯¹è¾¹ç•Œ â†’ æ— æ³•ç”¨ä½œåˆ†å‰²ç‚¹
```

**æ ¸å¿ƒæ´å¯Ÿ**ï¼š
- **è¿ç»­æ€§ = å¼ºåˆ¶çº¦æŸ**ï¼šå¿…é¡»å¤„ç†æ¯ä¸ªå…ƒç´ ï¼Œæ— æ³•è·³è¿‡
- **éè¿ç»­æ€§ = é€‰æ‹©è‡ªç”±**ï¼šå¯ä»¥é€‰æ‹©æ€§å¿½ç•¥ä¸åˆ©å…ƒç´ 
- **æ™ºèƒ½åˆ†å‰²ä»…é€‚ç”¨äºè¿ç»­é—®é¢˜**ï¼šåªæœ‰åœ¨æ— æ³•ç»•è¿‡ç ´åæ€§å…ƒç´ æ—¶ï¼Œå®ƒä»¬æ‰èƒ½æˆä¸ºæœ‰æ•ˆçš„åˆ†å‰²è¾¹ç•Œ

---

**å…³é”®è®°å¿†ç‚¹**ï¼š
- ğŸ” **å¯»æ‰¾ç ´åæ€§å…ƒç´ **ï¼šä»€ä¹ˆä¼šè®©è§£æ— æ•ˆï¼Ÿ
- âš¡ **æ™ºèƒ½åˆ†å‰²ä¼˜å…ˆ**ï¼šæœ‰å¤©ç„¶åˆ†å‰²ç‚¹å°±ç”¨æ™ºèƒ½åˆ†å‰²
- ğŸ”„ **è·¨è¶Šæƒ…å†µåˆ†æ**ï¼šæœ€ä¼˜è§£ä¼šè·¨è¶Šåˆ†å‰²ç‚¹å—ï¼Ÿ
- ğŸ“Š **å¤æ‚åº¦æƒè¡¡**ï¼šåœ¨æ•ˆç‡å’Œå®ç°éš¾åº¦é—´å¹³è¡¡
- ğŸ¯ **è¾¹ç•Œæƒ…å†µå¤„ç†**ï¼šç©ºæ®µã€å•å…ƒç´ æ®µçš„ç‰¹æ®Šå¤„ç†
- ğŸš¨ **è¿ç»­æ€§æ£€æŸ¥**ï¼š**åªæœ‰è¿ç»­å­æ•°ç»„/å­ä¸²é—®é¢˜æ‰èƒ½ä½¿ç”¨ç ´åæ€§å…ƒç´ åˆ†å‰²ï¼**